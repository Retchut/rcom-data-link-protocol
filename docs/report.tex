\documentclass[11pt]{article}

\usepackage{graphicx}
\usepackage[utf8]{inputenc}
\graphicspath{{./images/}}

\title{\includegraphics[scale=0.3]{logo.png} \\ \textbf{Data Link Protocol}}
\author{Computer Networks\\ Bachelors in Informatics and Computing Engineering \\ \\ 3LEIC03\_G3 \\ \\ Tiago Rodrigues up201907021@fe.up.pt \\ MÃ¡rio Travassos up201905871@fe.up.pt  }
\date{\today}

\begin{document}

\maketitle

\newpage

\section*{Summary}

\paragraph{}This report will cover the first work proposed for the Computer Networks Curricular Unit, with the objective of creating a small application that could transfer data through two computers asynchronously, through a serial port.

\paragraph{}The application is capable of transferring files whilst mainting their integrity, and detect errors in transmission, resolving them if possible.

\section*{Introduction}

\paragraph{}This report is the result of an examination to the practical component, which was the development of a data transfer protocol. A serial port was used to transfer the files in an asynchronous fashion.

The report is organized as follows:

\begin{enumerate}
  \item{Architecture- Functional blocks and interfaces}
  \item{Code Structure - APIs, main code structures and their relation with the architecture}
  \item{Main use cases - Identification and Call Stack Sequence}
  \item{Data link Protocol - Main functional aspects and implementation strategy}
  \item{Application Protocol - Main functional aspects and implementation strategy }
  \item{Validation - Description of the tests conducted}
  \item{Efficiency - Statistical characterization of efficiency, against a Stop\&Wait protocol}
  \item{Conclusion - Summary of the above descriptions, reflection on the learning objectives}
\end{enumerate}

\section{Architecture}

The application consists of two main layers, one to interact with the file to be sent and another to interact with the hardware. They are the Application Layer, and the Data-Link Layer, and they are detailed below.

\subsection{Application Layer}

\paragraph{}This layer can be found in the \textbf{rcom-ftp.c} file, and it encompasses everything related to interaction with the files, be it opening, closing, reading and writing to and from it. Besides that, this is the layer through which the user interacts with the application.

\subsection{Data-Link Layer}

\paragraph{}This layer can be found in the \textbf{ll.c} file and it is responsible for ensuring a smooth data transmission over the hardware, including opening, closing, writing and reading from the serial port, with the help of the auxiliary functions present in \textbf{config.c}, \textbf{read.c}, \textbf{send.c}, \textbf{state.c} and \textbf{utils.c}.

\section{Code Structure}

\paragraph{}The code is divided into seven source code files, separated by responsibility (reading from or writing to the serial port), and by layer. Also, each of them has a corresponding header file. Finally, there is a dedicated header file that hosts several common constants.

\subsection{Application - rcom-ftp.c}

\paragraph{}This module contains the entire application layer developed.

\paragraph{Main Functions}

\begin{itemize}
        \item{main - Interacts with the user and passes the arguments given to the rest of the program.}
        \item{sendFile - Sends the file requested by the user.}
        \item{readFile - Retrieves the file sent by the user.}
\end{itemize}

\paragraph{Main Data Structures}

\begin{itemize}
        \item{fileData - Responsible for holding some metadata of the file.}
\end{itemize}

\subsection{Config - config.c}

\paragraph{}This module contains the functions required for setting up the serial port for proper file transferring.

\paragraph{Main Functions}

\begin{itemize}
        \item{set\_config - Sets up the initial configuration for the serial port.}
        \item{reset\_config - Restores the serial port to its initial state.}
\end{itemize}

\subsection{Link Layer - ll.c}

\paragraph{}This module contains the interface for the Link Layer of the protocol.

\paragraph{Main Functions}

\begin{itemize}
        \item{llopen - Opens the serial port from frame transmission.}
        \item{llwrite - Writes a frame to the serial port.}
        \item{llread - Reads a frame from the serial port and checks its integrity.}
        \item{llclose - Closes the serial port after communication ceases.}
\end{itemize}

\subsection{Reading - read.c}

\paragraph{}This module contains the functions responsible for reading from the serial port.

\paragraph{Main Functions}

\begin{itemize}
        \item{readSupervisionFrame - Reads a supervision frame and checks if the information is received correctly.}
        \item{readInformationMessage - Reads an information message and saves the data, which includes the BCC, in a buffer.}
\end{itemize}

\subsection{Writing - send.c}

\paragraph{}This module contains the functions responsible for writing to the serial port.

\paragraph{Main Functions}

\begin{itemize}
        \item{writeSupervisionAndRetry - Attempts to write a supervision Frame in 3 attempts. If it succeeds, it stops.}
        \item{writeInformationAndRetry - Attempts to write an information Frame in 3 attempts. If it succeeds, it stops.}
\end{itemize}

\subsection{State Management - state.c}

\paragraph{}This module contains the functions responsible for managing the state of the application.

\paragraph{Main Functions}

\begin{itemize}
        \item{handle\_state - Function responsible for managing the state of the application, according to the data received.}
\end{itemize}

\paragraph{Main Data Structures}

\begin{itemize}
        \item{state\_t - Enumeration containing the possible states of the application.}
        \item{state\_machine - Besides the state of the machine, holds some of the main pieces of information from each frame.}
\end{itemize}

\subsection{Utilities - utils.c}

\paragraph{}This module contains some auxiliary functions that help the others with their operations.

\paragraph{Main Functions}

\begin{itemize}
        \item{stuff\_data - This functions stuffs the data given.}
        \item{unstuff\_frame - This functions unstuffs the frame given.}
\end{itemize}

\subsection{Constants - defines.h}

\paragraph{}This module contains some of the more meaningful constants used throughout the application, like Supervision Frame constants, Rejection Messages, among others.

\section{Main use cases}

\section{The Data link Layer}

\section{The Application Layer}

\section{Validation}

\section{Efficiency}

\section{Conclusion}

\end{document}
